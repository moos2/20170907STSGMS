<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 	<!-- 	private String id, title, content, regdate;
	private int articleSeq, hitCount; -->
<mapper namespace="com.gms.web.mapper.BoardMapper">

	<resultMap type="com.gms.web.command.RespMap" id="respMap">
		<id property="seq" column="article_seq"/>
		<result property="memberId" column="id"/>
		<result property="studentId" column="id"/>
		<result property="title" column="title"/>
		<result property="content" column="content"/>
		<result property="regdate" column="regdate"/>
		<result property="hitcount" column="hitcount"/>
		<result property="count" column="count"/>
		<result property="name" column="name"/>
		<result property="password" column="password"/>
		<result property="ssn" column="ssn"/>
		<result property="phone" column="phone"/>
		<result property="email" column="email"/>
		<result property="profile" column="profile"/>
	</resultMap>
	
	<resultMap type="com.gms.web.board.Article" id="article">
		<id property="articleSeq" column="article_seq"/>
		<result property="id" column="id"/>
		<result property="title" column="title"/>
		<result property="content" column="content"/>
		<result property="regdate" column="regdate"/>
		<result property="hitcount" column="hitcount"/>
	</resultMap>
		
	<insert id="insert" parameterType="com.gms.web.command.Command">
	
	</insert>
	
	<select id="selectList" resultMap="article" 
		parameterType="com.gms.web.command.Command">
		select * from board
		<if test="dir!=null">
		where id like #{dir}
		</if>
	</select>
	
	<select id="selectOne" resultMap="respMap" 
		parameterType="com.gms.web.command.Command">
		select b.title,CONCAT(b.id,'(',m.name,')') as memberId, b.content, b.article_seq as seq from member m join board b on m.member_id like b.id where b.article_seq like #{search}
		<!-- select b.title,b.id as memberId,m.name, b.content from member m join board b on m.member_id like b.id where b.article_seq like #{search} -->
	</select>
	
	<select id="count" resultMap="respMap">
		select count(*) as count from board;	
	</select>
	
	<update id="update" parameterType="com.gms.web.command.Command">
		update Board set title = #{action}, content =#{column} where article_seq like #{dir}
	</update>
	
	<delete id="delete" parameterType="com.gms.web.command.Command">
	
	</delete>
</mapper>